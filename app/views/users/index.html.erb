<div class="user-index">
  <!-- If we want this page permitted with devise -->
  <% if user_signed_in? %>
    <p>Logged in as: <%= current_user.username %></p>
  <% end %>
  <h2>All users</h2>
  <ul class="users">
    <% @users.each do |user| %>
    <li>
      <%= link_to user.username, user %><br>
    <% if current_user != user && !current_user.follows_given.pluck(:followee_id).include?(user.id) %>
      <%= link_to "Follow", follow_user_path(user), method: :post %>
    <% elsif current_user != user  %>
      <%= link_to "Unfollow", unfollow_user_path(user), method: :delete %>
    <% end %>
    </li>
  <% end %>
  </ul>
</div>

<br>
<%= link_to 'Back', request.referrer, class: "button" %>

<%# explore feed container %>
<div class="explore-feed">

<% @users.each do |user| %>
<%# explore feed item containing username and recipes %>

  <%# the name of the user %>
  <div class="explore-feed-heading">
  <h2><%= link_to user.username, user %></h2>

  <h2>class="chilli-button"><% if current_user != user && !current_user.follows_given.pluck(:followee_id).include?(user.id) %>
    <%= link_to "Follow", follow_user_path(user), method: :post %>
  <% elsif current_user != user  %>
    <%= link_to "Unfollow", unfollow_user_path(user), method: :delete %>
  <% end %><i class="fas fa-pepper-hot"></i></h2>

  </div>

  <div class="explore-feed-item">

  <% user.recipes.each do |recipe| %>
  <%# making the
  <%=link_to recipe_path(recipe.id) do %>
  <%# Some of the users recipes in a card %>
  <div class="explore-recipe-card">
  <%# Recipe image %>
  <%=cl_image_tag recipe.photo.key, height: 240 %>

  <%# Recipe title %>
  <div class="explore-recipe-info">
    <p><%= recipe.name %></p>
  </div>

  </div>
  <% end %>

  </div>
  <% end %>

</div>
